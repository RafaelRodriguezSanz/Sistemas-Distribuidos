FROM kapacitor:latest

COPY kapacitor.conf /etc/kapacitor/kapacitor.conf

EXPOSE 9092

# ENV KAPACITOR_HOSTNAME=kapacitor
# ENV KAPACITOR_LOGGING_LEVEL=INFO
# ENV KAPACITOR_REPORTING_ENABLED=true
# ENV KAPACITOR_INFLUXDB_0_URLS_0=http://influxdb:8086
# ENV KAPACITOR_INFLUXDB_0_USERNAME=admin
# ENV KAPACITOR_INFLUXDB_0_TOKEN=0qfrVjTKP-s9VZ_msUoZqez5ubytxENzCZo93WNE1_rzI-2k59tTLcRTMHCsWlxm67paxbCKInl0b8HzG5PzLg==
# ENV KAPACITOR_INFLUXDB_0_PASSWORD=0qfrVjTKP-s9VZ_msUoZqez5ubytxENzCZo93WNE1_rzI-2k59tTLcRTMHCsWlxm67paxbCKInl0b8HzG5PzLg==
# ENV KAPACITOR_KAPACITOR_USERNAME=admin
# ENV KAPACITOR_KAPACITOR_PASSWORD=0qfrVjTKP-s9VZ_msUoZqez5ubytxENzCZo93WNE1_rzI-2k59tTLcRTMHCsWlxm67paxbCKInl0b8HzG5PzLg==
# ENV KAPACITOR_INFLUXDB_0_HTTP_AUTH_USERNAME=admin
# ENV KAPACITOR_INFLUXDB_0_HTTP_AUTH_PASSWORD=0qfrVjTKP-s9VZ_msUoZqez5ubytxENzCZo93WNE1_rzI-2k59tTLcRTMHCsWlxm67paxbCKInl0b8HzG5PzLg==

ENV KAPACITOR_HOSTNAME: kapacitor
ENV KAPACITOR_INFLUXDB_0_URLS_0: "http://influxdb:8086"
ENV KAPACITOR_INFLUXDB_ENABLED: "true"
ENV KAPACITOR_INFLUXDB_NAME: "influxdb"
ENV KAPACITOR_INFLUXDB_USERNAME: "admin"
ENV KAPACITOR_INFLUXDB_PASSWORD: "0qfrVjTKP-s9VZ_msUoZqez5ubytxENzCZo93WNE1_rzI-2k59tTLcRTMHCsWlxm67paxbCKInl0b8HzG5PzLg=="
ENV KAPACITOR_INFLUXDB_STARTUP_TIMEOUT: "5m"
ENV KAPACITOR_INFLUXDB_SUBSCRIPTION_MODE: "server"
ENV KAPACITOR_INFLUXDB_SUBSCRIPTION_PROTOCOL: "http"
ENV KAPACITOR_INFLUXDB_KAPACITOR_HOSTNAME: "kapacitor"


ENV KAPACITOR_CONFIG_PATH=/etc/kapacitor/kapacitor.conf


ENTRYPOINT ["kapacitord", "-config", "/etc/kapacitor/kapacitor.conf"]
# ENTRYPOINT [ "kapacitord"]